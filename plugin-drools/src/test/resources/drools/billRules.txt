package com.drools;

import com.plugin.drools.bill.model.Bill;

rule "驳回"
when
    bill : Bill(action == "驳回")
then
    bill.setStatus("驳回");
end


rule "1, 送审"
when
    bill: Bill(status == "待审批", action == "送审")
then
    bill.setStatus("部门经理审批");
end


rule "2, 部门经理同意"
when
    bill: Bill(status == "部门经理审批", action == "同意")
then
    bill.setStatus("额度判断");
    update(bill);
end


rule "3.1, 大于等于2万"
when
    bill: Bill(status == "额度判断", amount >= 20000)
then
    bill.setStatus("总经理审批");
end

rule "3.2, 小于2万"
when
    bill: Bill(status == "额度判断", amount < 20000)
then
    bill.setStatus("财务审核");
end


rule "4, 总经理同意"
when
    bill: Bill(status == "总经理审批", action == "同意")
then
    bill.setStatus("财务审核");
end


rule "5, 财务审核"
when
    bill : Bill(status == "财务审核", action == "审核")
then
    bill.setStatus("审批生效");
end
